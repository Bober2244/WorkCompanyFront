{"ast":null,"code":"import { ref, onMounted } from 'vue';\nimport { useRoute } from 'vue-router';\nimport axios from 'axios';\nimport AppHeader from \"@/components/AppHeader.vue\";\nimport AppFooter from \"@/components/AppFooter.vue\";\nimport ImageSlider from \"@/components/ImageSlider.vue\";\nimport store from \"@/store\"; // Импортируем store для управления корзиной\n\nexport default {\n  components: {\n    AppFooter,\n    AppHeader,\n    ImageSlider\n  },\n  setup() {\n    const route = useRoute();\n    const product = ref({\n      id: null,\n      title: '',\n      images: [],\n      price: '',\n      sizes: [],\n      description: ''\n    });\n    const selectedSize = ref(39); // Используем ref для выбранного размера\n\n    onMounted(async () => {\n      const productId = route.params.id;\n      try {\n        const response = await axios.get(`http://localhost:8000/api/items/${productId}`);\n        const productData = response.data;\n        product.value = {\n          id: productData.id,\n          title: productData.title,\n          images: productData.image_urls.slice(1),\n          price: productData.price,\n          sizes: productData.sizes || [35, 35.5, 36, 36.5, 37, 38, 39, 40, 40.5, 41, 41.5, 42, 42.5, 43.5, 44, 45, 45.5],\n          description: productData.description\n        };\n      } catch (error) {\n        console.error(\"Ошибка при загрузке данных продукта:\", error);\n      }\n    });\n\n    // Метод для добавления товара в корзину\n    const addToCart = () => {\n      const cartData = {\n        user_id: Number(sessionStorage.getItem(\"userId\")),\n        item_id: product.value.id,\n        size: String(selectedSize.value)\n      };\n      store.addItemToCart(cartData); // Добавляем товар в корзину через store\n\n      console.log(cartData);\n      alert('Товар добавлен в корзину');\n    };\n\n    // Получить количество товара в корзине\n    const getQuantity = productId => {\n      const item = store.cartItems.find(item => item.item_id === productId);\n      return item ? item.quantity : 0; // Возвращаем количество или 0, если товара нет\n    };\n\n    // Увеличить количество товара в корзине\n    const incrementQuantity = productId => {\n      store.incrementQuantity(productId); // Увеличиваем количество через store\n    };\n\n    // Уменьшить количество товара в корзине\n    const decrementQuantity = productId => {\n      store.decrementQuantity(productId); // Уменьшаем количество через store\n    };\n\n    return {\n      product,\n      selectedSize,\n      addToCart,\n      incrementQuantity,\n      decrementQuantity,\n      getQuantity\n    };\n  }\n};","map":{"version":3,"mappings":"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","names":["ref","onMounted","useRoute","axios","AppHeader","AppFooter","ImageSlider","store","components","setup","route","product","id","title","images","price","sizes","description","selectedSize","productId","params","response","get","productData","data","value","image_urls","slice","error","console","addToCart","cartData","user_id","Number","sessionStorage","getItem","item_id","size","String","addItemToCart","log","alert","getQuantity","item","cartItems","find","quantity","incrementQuantity","decrementQuantity"],"sourceRoot":"","sources":["/Users/nicolassergeev/WebstormProjects/frontend-ShoesShop/src/components/CartShop.vue"],"sourcesContent":["<template>\n  <AppHeader></AppHeader>\n  <div class=\"product-detail-container\">\n    <div class=\"product-detail\">\n      <div class=\"image-slider-wrapper\">\n        <ImageSlider :images=\"product.images\" :auto-slide-interval=\"3000\" />\n      </div>\n      <div class=\"product-info\">\n        <h1>{{ product.title }}</h1>\n        <p class=\"price\">Цена: {{ product.price }} руб.</p>\n\n        <div class=\"size-selection\">\n          <h2>Выберите размер:</h2>\n          <select\n              class=\"size-dropdown\"\n              v-model=\"selectedSize\"\n          >\n            <option\n                v-for=\"size in product.sizes\"\n                :key=\"size\"\n                :value=\"size\"\n            >\n              {{ size }}\n            </option>\n          </select>\n        </div>\n\n        <p class=\"description\">{{ product.description }}</p>\n\n        <!-- Количество товара -->\n        <div class=\"quantity-control\">\n          <button @click=\"decrementQuantity(product.id)\" class=\"quantity-btn\">-</button>\n          <span>{{ getQuantity(product.id) }}</span>\n          <button @click=\"incrementQuantity(product.id)\" class=\"quantity-btn\">+</button>\n        </div>\n\n        <button @click=\"addToCart\" class=\"form__button\">Добавить в корзину за {{ product.price }} руб.</button>\n      </div>\n    </div>\n  </div>\n  <AppFooter></AppFooter>\n</template>\n\n\n<script>\nimport { ref, onMounted } from 'vue';\nimport { useRoute } from 'vue-router';\nimport axios from 'axios';\nimport AppHeader from \"@/components/AppHeader.vue\";\nimport AppFooter from \"@/components/AppFooter.vue\";\nimport ImageSlider from \"@/components/ImageSlider.vue\";\nimport store from \"@/store\"; // Импортируем store для управления корзиной\n\nexport default {\n  components: {\n    AppFooter,\n    AppHeader,\n    ImageSlider\n  },\n  setup() {\n    const route = useRoute();\n    const product = ref({\n      id: null,\n      title: '',\n      images: [],\n      price: '',\n      sizes: [],\n      description: ''\n    });\n\n    const selectedSize = ref(39); // Используем ref для выбранного размера\n\n    onMounted(async () => {\n      const productId = route.params.id;\n\n      try {\n        const response = await axios.get(`http://localhost:8000/api/items/${productId}`);\n        const productData = response.data;\n\n        product.value = {\n          id: productData.id,\n          title: productData.title,\n          images: productData.image_urls.slice(1),\n          price: productData.price,\n          sizes: productData.sizes || [35, 35.5, 36, 36.5, 37, 38, 39, 40, 40.5, 41, 41.5, 42, 42.5, 43.5, 44, 45, 45.5],\n          description: productData.description\n        };\n      } catch (error) {\n        console.error(\"Ошибка при загрузке данных продукта:\", error);\n      }\n    });\n\n    // Метод для добавления товара в корзину\n    const addToCart = () => {\n      const cartData = {\n        user_id: Number(sessionStorage.getItem(\"userId\")),\n        item_id: product.value.id,\n        size: String(selectedSize.value)\n      };\n\n      store.addItemToCart(cartData); // Добавляем товар в корзину через store\n\n      console.log(cartData);\n      alert('Товар добавлен в корзину');\n    };\n\n    // Получить количество товара в корзине\n    const getQuantity = (productId) => {\n      const item = store.cartItems.find(item => item.item_id === productId);\n      return item ? item.quantity : 0; // Возвращаем количество или 0, если товара нет\n    };\n\n    // Увеличить количество товара в корзине\n    const incrementQuantity = (productId) => {\n      store.incrementQuantity(productId); // Увеличиваем количество через store\n    };\n\n    // Уменьшить количество товара в корзине\n    const decrementQuantity = (productId) => {\n      store.decrementQuantity(productId); // Уменьшаем количество через store\n    };\n\n    return { product, selectedSize, addToCart, incrementQuantity, decrementQuantity, getQuantity };\n  }\n};\n</script>\n\n\n<style scoped>\n.item-title-link {\n  text-decoration: none;\n  color: #333;\n}\n\n.item-title-link:hover {\n  color: #4caf50;\n}\n\n.cart-panel {\n  position: fixed;\n  top: 0;\n  right: 0;\n  width: 370px;\n  height: 100%;\n  background: #fff;\n  box-shadow: -2px 0 10px rgba(0, 0, 0, 0.2);\n  transform: translateX(100%);\n  transition: transform 0.3s ease;\n  z-index: 1000;\n}\n\n.cart-panel.open {\n  transform: translateX(0);\n}\n\n.cart-content {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  padding: 20px;\n  background-color: #f9f9f9;\n  border-radius: 10px;\n}\n\n.cart-header {\n  display: flex;\n  align-items: center;\n  margin-bottom: 15px;\n}\n\n.cart-icon {\n  width: 24px;\n  height: 24px;\n  margin-left: 10px;\n  margin-bottom: 7px;\n}\n\n.cart-items {\n  flex-grow: 1;\n  overflow-y: auto;\n}\n\n.cart-item {\n  display: flex;\n  justify-content: space-between;\n  padding: 12px 0;\n  border-bottom: 1px solid #ddd;\n  font-size: 16px;\n}\n\n.item-title {\n  font-weight: bold;\n  font-size: 16px;\n  color: #333;\n}\n\n.item-price {\n  color: #4caf50;\n  font-size: 16px;\n}\n\n.remove-button {\n  padding: 4px 8px;\n  background-color: transparent;\n  color: #f44336;\n  border: none;\n  cursor: pointer;\n  font-size: 18px;\n  font-weight: bold;\n  transition: color 0.2s;\n}\n\n.remove-button:hover {\n  color: #d32f2f;\n}\n\n.cart-footer {\n  margin-top: 20px;\n  text-align: center;\n}\n\n\n.close-button {\n  align-self: flex-end;\n  background: none;\n  border: none;\n  margin-left: 117px;\n  margin-bottom: 7px;\n  padding: 0;\n  cursor: pointer;\n  transition: transform 0.2s ease;\n}\n\n.close-button img {\n  width: 24px;\n  height: 24px;\n}\n\n.close-button:hover {\n  transform: scale(1.1);\n}\n\nh3 {\n  font-size: 20px;\n  color: #333;\n}\n\n.cart-footer p {\n  font-weight: bold;\n}\n\n.cart-items p {\n  color: #555;\n}\n\n.cart-items .cart-item p {\n  color: #333;\n}\n\n.item-size {\n  color: #555;\n  font-size: 14px; /* Меньший размер шрифта для размера */\n  margin-top: 4px;\n}\n\n.quantity-controls {\n  display: flex;\n  align-items: center;\n}\n\n.quantity-button {\n  padding: 5px 8px;\n  background-color: #f0f0f0;\n  border: 1px solid #ddd;\n  cursor: pointer;\n  font-size: 16px;\n  margin: 0;  /* Убрали отступы между кнопками */\n}\n\n.quantity {\n  font-size: 16px;\n  margin: 0 8px;  /* Оставили отступ между числом и кнопками */\n}\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}