{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { reactive } from \"vue\";\nconst store = reactive({\n  cartItems: [],\n  userId: sessionStorage.getItem('userId'),\n  // Предположим, что userId сохраняется где-то в локальном хранилище\n\n  // Загрузка корзины с сервера при инициализации\n  async loadCart() {\n    try {\n      const response = await fetch(`http://localhost:8000/api/cart/${this.userId}`);\n      if (!response.ok) {\n        throw new Error(\"Не удалось загрузить корзину\");\n      }\n      const data = await response.json();\n      this.cartItems = data;\n    } catch (error) {\n      console.error(\"Ошибка при загрузке корзины:\", error);\n    }\n  },\n  // Добавить товар в корзину\n  async addItem(item) {\n    try {\n      const response = await fetch(`http://localhost:8000/api/cart/${this.userId}/add`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          itemId: item.id,\n          size: item.size,\n          // если выбран размер\n          quantity: 1\n        })\n      });\n      if (!response.ok) {\n        throw new Error(\"Не удалось добавить товар в корзину\");\n      }\n      const data = await response.json();\n      this.cartItems.push(data);\n    } catch (error) {\n      console.error(\"Ошибка при добавлении товара в корзину:\", error);\n    }\n  },\n  // Удалить товар из корзины\n  async removeItem(itemId) {\n    try {\n      const response = await fetch(`http://localhost:8000/api/cart/${this.userId}/remove`, {\n        method: \"DELETE\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          itemId\n        })\n      });\n      if (!response.ok) {\n        throw new Error(\"Не удалось удалить товар из корзины\");\n      }\n      this.cartItems = this.cartItems.filter(item => item.id !== itemId);\n    } catch (error) {\n      console.error(\"Ошибка при удалении товара из корзины:\", error);\n    }\n  },\n  // Очистить корзину\n  async clearCart() {\n    try {\n      const response = await fetch(`http://localhost:8000/api/cart/${this.userId}/clear`, {\n        method: \"DELETE\"\n      });\n      if (!response.ok) {\n        throw new Error(\"Не удалось очистить корзину\");\n      }\n      this.cartItems = [];\n    } catch (error) {\n      console.error(\"Ошибка при очистке корзины:\", error);\n    }\n  },\n  // Подсчитать общую сумму\n  get totalPrice() {\n    return this.cartItems.reduce((sum, item) => sum + item.price * item.quantity, 0);\n  },\n  // Подсчитать общее количество товаров\n  get totalItems() {\n    return this.cartItems.reduce((count, item) => count + item.quantity, 0);\n  }\n});\nexport default store;","map":{"version":3,"names":["reactive","store","cartItems","userId","sessionStorage","getItem","loadCart","response","fetch","ok","Error","data","json","error","console","addItem","item","method","headers","body","JSON","stringify","itemId","id","size","quantity","push","removeItem","filter","clearCart","totalPrice","reduce","sum","price","totalItems","count"],"sources":["/Users/nicolassergeev/WebstormProjects/frontend-ShoesShop/src/store.js"],"sourcesContent":["import { reactive } from \"vue\";\n\nconst store = reactive({\n    cartItems: [],\n    userId: sessionStorage.getItem('userId'),  // Предположим, что userId сохраняется где-то в локальном хранилище\n\n    // Загрузка корзины с сервера при инициализации\n    async loadCart() {\n        try {\n            const response = await fetch(`http://localhost:8000/api/cart/${this.userId}`);\n            if (!response.ok) {\n                throw new Error(\"Не удалось загрузить корзину\");\n            }\n            const data = await response.json();\n            this.cartItems = data;\n        } catch (error) {\n            console.error(\"Ошибка при загрузке корзины:\", error);\n        }\n    },\n\n    // Добавить товар в корзину\n    async addItem(item) {\n        try {\n            const response = await fetch(`http://localhost:8000/api/cart/${this.userId}/add`, {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                },\n                body: JSON.stringify({\n                    itemId: item.id,\n                    size: item.size, // если выбран размер\n                    quantity: 1,\n                }),\n            });\n            if (!response.ok) {\n                throw new Error(\"Не удалось добавить товар в корзину\");\n            }\n            const data = await response.json();\n            this.cartItems.push(data);\n        } catch (error) {\n            console.error(\"Ошибка при добавлении товара в корзину:\", error);\n        }\n    },\n\n    // Удалить товар из корзины\n    async removeItem(itemId) {\n        try {\n            const response = await fetch(`http://localhost:8000/api/cart/${this.userId}/remove`, {\n                method: \"DELETE\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                },\n                body: JSON.stringify({ itemId }),\n            });\n            if (!response.ok) {\n                throw new Error(\"Не удалось удалить товар из корзины\");\n            }\n            this.cartItems = this.cartItems.filter((item) => item.id !== itemId);\n        } catch (error) {\n            console.error(\"Ошибка при удалении товара из корзины:\", error);\n        }\n    },\n\n    // Очистить корзину\n    async clearCart() {\n        try {\n            const response = await fetch(`http://localhost:8000/api/cart/${this.userId}/clear`, {\n                method: \"DELETE\",\n            });\n            if (!response.ok) {\n                throw new Error(\"Не удалось очистить корзину\");\n            }\n            this.cartItems = [];\n        } catch (error) {\n            console.error(\"Ошибка при очистке корзины:\", error);\n        }\n    },\n\n    // Подсчитать общую сумму\n    get totalPrice() {\n        return this.cartItems.reduce((sum, item) => sum + item.price * item.quantity, 0);\n    },\n\n    // Подсчитать общее количество товаров\n    get totalItems() {\n        return this.cartItems.reduce((count, item) => count + item.quantity, 0);\n    },\n});\n\nexport default store;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}