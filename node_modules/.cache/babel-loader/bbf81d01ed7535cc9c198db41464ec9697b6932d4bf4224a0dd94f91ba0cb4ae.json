{"ast":null,"code":"import { reactive } from \"vue\";\nconst store = reactive({\n  cartItems: [],\n  userId: sessionStorage.getItem('userId'),\n  // Get userId from sessionStorage\n\n  // Function to load cart items for the current user\n  async loadCart() {\n    try {\n      const response = await fetch(`http://localhost:8000/api/carts?user_id=${this.userId}`);\n      if (!response.ok) {\n        throw new Error(\"Не удалось загрузить корзину\");\n      }\n      const data = await response.json();\n\n      // Flatten the cart items and extract item details\n      this.cartItems = data.map(cartItem => ({\n        id: cartItem.id,\n        title: cartItem.item.title,\n        price: cartItem.item.price,\n        size: cartItem.size,\n        quantity: 1 // You can customize quantity logic as needed\n      }));\n    } catch (error) {\n      console.error(\"Ошибка при загрузке корзины:\", error);\n    }\n  },\n  get totalPrice() {\n    return this.cartItems.reduce((sum, item) => sum + item.price * item.quantity, 0);\n  },\n  get totalItems() {\n    return this.cartItems.reduce((count, item) => count + item.quantity, 0);\n  }\n});\nexport default store;","map":{"version":3,"names":["reactive","store","cartItems","userId","sessionStorage","getItem","loadCart","response","fetch","ok","Error","data","json","map","cartItem","id","title","item","price","size","quantity","error","console","totalPrice","reduce","sum","totalItems","count"],"sources":["/Users/nicolassergeev/WebstormProjects/frontend-ShoesShop/src/store.js"],"sourcesContent":["import { reactive } from \"vue\";\n\nconst store = reactive({\n    cartItems: [],\n    userId: sessionStorage.getItem('userId'),  // Get userId from sessionStorage\n\n    // Function to load cart items for the current user\n    async loadCart() {\n        try {\n            const response = await fetch(`http://localhost:8000/api/carts?user_id=${this.userId}`);\n            if (!response.ok) {\n                throw new Error(\"Не удалось загрузить корзину\");\n            }\n            const data = await response.json();\n\n            // Flatten the cart items and extract item details\n            this.cartItems = data.map(cartItem => ({\n                id: cartItem.id,\n                title: cartItem.item.title,\n                price: cartItem.item.price,\n                size: cartItem.size,\n                quantity: 1, // You can customize quantity logic as needed\n            }));\n        } catch (error) {\n            console.error(\"Ошибка при загрузке корзины:\", error);\n        }\n    },\n\n    get totalPrice() {\n        return this.cartItems.reduce((sum, item) => sum + item.price * item.quantity, 0);\n    },\n\n    get totalItems() {\n        return this.cartItems.reduce((count, item) => count + item.quantity, 0);\n    },\n});\n\nexport default store;\n"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,KAAK;AAE9B,MAAMC,KAAK,GAAGD,QAAQ,CAAC;EACnBE,SAAS,EAAE,EAAE;EACbC,MAAM,EAAEC,cAAc,CAACC,OAAO,CAAC,QAAQ,CAAC;EAAG;;EAE3C;EACA,MAAMC,QAAQA,CAAA,EAAG;IACb,IAAI;MACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAE,2CAA0C,IAAI,CAACL,MAAO,EAAC,CAAC;MACtF,IAAI,CAACI,QAAQ,CAACE,EAAE,EAAE;QACd,MAAM,IAAIC,KAAK,CAAC,8BAA8B,CAAC;MACnD;MACA,MAAMC,IAAI,GAAG,MAAMJ,QAAQ,CAACK,IAAI,CAAC,CAAC;;MAElC;MACA,IAAI,CAACV,SAAS,GAAGS,IAAI,CAACE,GAAG,CAACC,QAAQ,KAAK;QACnCC,EAAE,EAAED,QAAQ,CAACC,EAAE;QACfC,KAAK,EAAEF,QAAQ,CAACG,IAAI,CAACD,KAAK;QAC1BE,KAAK,EAAEJ,QAAQ,CAACG,IAAI,CAACC,KAAK;QAC1BC,IAAI,EAAEL,QAAQ,CAACK,IAAI;QACnBC,QAAQ,EAAE,CAAC,CAAE;MACjB,CAAC,CAAC,CAAC;IACP,CAAC,CAAC,OAAOC,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;IACxD;EACJ,CAAC;EAED,IAAIE,UAAUA,CAAA,EAAG;IACb,OAAO,IAAI,CAACrB,SAAS,CAACsB,MAAM,CAAC,CAACC,GAAG,EAAER,IAAI,KAAKQ,GAAG,GAAGR,IAAI,CAACC,KAAK,GAAGD,IAAI,CAACG,QAAQ,EAAE,CAAC,CAAC;EACpF,CAAC;EAED,IAAIM,UAAUA,CAAA,EAAG;IACb,OAAO,IAAI,CAACxB,SAAS,CAACsB,MAAM,CAAC,CAACG,KAAK,EAAEV,IAAI,KAAKU,KAAK,GAAGV,IAAI,CAACG,QAAQ,EAAE,CAAC,CAAC;EAC3E;AACJ,CAAC,CAAC;AAEF,eAAenB,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}