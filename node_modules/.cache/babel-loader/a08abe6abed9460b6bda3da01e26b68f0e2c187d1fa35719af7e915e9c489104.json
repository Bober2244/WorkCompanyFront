{"ast":null,"code":"import { ref, onMounted } from 'vue';\nimport { useRoute } from 'vue-router';\nimport axios from 'axios';\nimport AppHeader from \"@/components/AppHeader.vue\";\nimport AppFooter from \"@/components/AppFooter.vue\";\nimport ImageSlider from \"@/components/ImageSlider.vue\";\nexport default {\n  components: {\n    AppFooter,\n    AppHeader,\n    ImageSlider\n  },\n  setup() {\n    const route = useRoute();\n    const product = ref({\n      id: null,\n      title: '',\n      images: [],\n      price: '',\n      sizes: [],\n      description: ''\n    });\n    const selectedSize = ref(39); // Use a ref for selected size in setup\n\n    onMounted(async () => {\n      const productId = route.params.id;\n      try {\n        const response = await axios.get(`http://localhost:8000/api/items/${productId}`);\n        const productData = response.data;\n        product.value = {\n          id: productData.id,\n          title: productData.title,\n          images: productData.image_urls.slice(1),\n          price: productData.price,\n          sizes: productData.sizes || [35, 35.5, 36, 36.5, 37, 38, 39, 40, 40.5, 41, 41.5, 42, 42.5, 43.5, 44, 45, 45.5],\n          description: productData.description\n        };\n      } catch (error) {\n        console.error(\"Ошибка при загрузке данных продукта:\", error);\n      }\n    });\n    const addToCart = async () => {\n      const cartData = {\n        user_id: Number(sessionStorage.getItem(\"userId\")),\n        item_id: product.value.id,\n        size: String(selectedSize.value)\n      };\n      try {\n        const productImage = document.querySelector(\".image-slider-wrapper img\"); // Получаем картинку из слайдера\n        if (productImage) {\n          const rect = productImage.getBoundingClientRect(); // Позиция картинки на экране\n          const flyingImage = document.createElement(\"img\");\n          flyingImage.src = productImage.src; // Устанавливаем тот же источник\n          flyingImage.className = \"flying-image\"; // Добавляем класс для стилей\n          flyingImage.style.top = `${rect.top}px`;\n          flyingImage.style.left = `${rect.left}px`;\n          document.body.appendChild(flyingImage);\n\n          // Точка назначения (например, корзина в правом верхнем углу)\n          const cartIcon = document.querySelector(\".cart-icon\"); // Иконка корзины\n          if (cartIcon) {\n            const cartRect = cartIcon.getBoundingClientRect();\n            flyingImage.style.transform = `translate(${cartRect.left - rect.left}px, ${cartRect.top - rect.top}px) scale(0.2)`;\n            flyingImage.style.opacity = \"0\";\n          }\n\n          // Удаляем элемент после завершения анимации\n          setTimeout(() => flyingImage.remove(), 1000);\n        }\n        const response = await axios.post('http://localhost:8000/api/carts', cartData);\n        console.log(cartData);\n        if (response.status === 200) {\n          console.log('Товар добавлен в корзину');\n          window.location.reload();\n        } else {\n          console.error('Ошибка при добавлении товара в корзину:', response.data.message);\n        }\n      } catch (error) {\n        console.error('Ошибка при добавлении товара в корзину:', error);\n      }\n    };\n    return {\n      product,\n      selectedSize,\n      addToCart\n    }; // Make selectedSize available in the template\n  }\n};","map":{"version":3,"mappings":"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","names":["ref","onMounted","useRoute","axios","AppHeader","AppFooter","ImageSlider","components","setup","route","product","id","title","images","price","sizes","description","selectedSize","productId","params","response","get","productData","data","value","image_urls","slice","error","console","addToCart","cartData","user_id","Number","sessionStorage","getItem","item_id","size","String","productImage","document","querySelector","rect","getBoundingClientRect","flyingImage","createElement","src","className","style","top","left","body","appendChild","cartIcon","cartRect","transform","opacity","setTimeout","remove","post","log","status","window","location","reload","message"],"sourceRoot":"","sources":["/Users/nicolassergeev/WebstormProjects/frontend-ShoesShop/pages/ProductDetail.vue"],"sourcesContent":["<template>\n  <AppHeader></AppHeader>\n  <div class=\"product-detail-container\">\n    <div class=\"product-detail\">\n      <div class=\"image-slider-wrapper\">\n        <ImageSlider :images=\"product.images\" />\n      </div>\n      <div class=\"product-info\">\n        <h1>{{ product.title }}</h1>\n        <p class=\"price\">Цена: {{ product.price }} руб.</p>\n\n        <div class=\"size-selection\">\n          <h2>Выберите размер:</h2>\n          <select\n              class=\"size-dropdown\"\n              v-model=\"selectedSize\"\n          >\n            <option\n                v-for=\"size in product.sizes\"\n                :key=\"size\"\n                :value=\"size\"\n            >\n              {{ size }}\n            </option>\n          </select>\n        </div>\n\n        <p class=\"description\">{{ product.description }}</p>\n\n        <button @click=\"addToCart\" class=\"form__button\">Добавить в корзину за {{ product.price }} руб.</button>\n      </div>\n    </div>\n  </div>\n  <AppFooter></AppFooter>\n</template>\n\n<script>\nimport { ref, onMounted } from 'vue';\nimport { useRoute } from 'vue-router';\nimport axios from 'axios';\nimport AppHeader from \"@/components/AppHeader.vue\";\nimport AppFooter from \"@/components/AppFooter.vue\";\nimport ImageSlider from \"@/components/ImageSlider.vue\";\n\nexport default {\n  components: {\n    AppFooter,\n    AppHeader,\n    ImageSlider\n  },\n  setup() {\n    const route = useRoute();\n    const product = ref({\n      id: null,\n      title: '',\n      images: [],\n      price: '',\n      sizes: [],\n      description: ''\n    });\n\n    const selectedSize = ref(39); // Use a ref for selected size in setup\n\n    onMounted(async () => {\n      const productId = route.params.id;\n\n      try {\n        const response = await axios.get(`http://localhost:8000/api/items/${productId}`);\n        const productData = response.data;\n\n        product.value = {\n          id: productData.id,\n          title: productData.title,\n          images: productData.image_urls.slice(1),\n          price: productData.price,\n          sizes: productData.sizes || [35, 35.5, 36, 36.5, 37, 38, 39, 40, 40.5, 41, 41.5, 42, 42.5, 43.5, 44, 45, 45.5],\n          description: productData.description\n        };\n      } catch (error) {\n        console.error(\"Ошибка при загрузке данных продукта:\", error);\n      }\n    });\n\n    const addToCart = async () => {\n      const cartData = {\n        user_id: Number(sessionStorage.getItem(\"userId\")),\n        item_id: product.value.id,\n        size: String(selectedSize.value)\n      };\n\n      try {\n\n        const productImage = document.querySelector(\".image-slider-wrapper img\"); // Получаем картинку из слайдера\n        if (productImage) {\n          const rect = productImage.getBoundingClientRect(); // Позиция картинки на экране\n          const flyingImage = document.createElement(\"img\");\n          flyingImage.src = productImage.src; // Устанавливаем тот же источник\n          flyingImage.className = \"flying-image\"; // Добавляем класс для стилей\n          flyingImage.style.top = `${rect.top}px`;\n          flyingImage.style.left = `${rect.left}px`;\n          document.body.appendChild(flyingImage);\n\n          // Точка назначения (например, корзина в правом верхнем углу)\n          const cartIcon = document.querySelector(\".cart-icon\"); // Иконка корзины\n          if (cartIcon) {\n            const cartRect = cartIcon.getBoundingClientRect();\n            flyingImage.style.transform = `translate(${cartRect.left - rect.left}px, ${cartRect.top - rect.top}px) scale(0.2)`;\n            flyingImage.style.opacity = \"0\";\n          }\n\n          // Удаляем элемент после завершения анимации\n          setTimeout(() => flyingImage.remove(), 1000);\n        }\n\n        const response = await axios.post('http://localhost:8000/api/carts', cartData);\n        console.log(cartData)\n        if (response.status === 200) {\n          console.log('Товар добавлен в корзину');\n          window.location.reload();\n        } else {\n          console.error('Ошибка при добавлении товара в корзину:', response.data.message);\n        }\n      } catch (error) {\n        console.error('Ошибка при добавлении товара в корзину:', error);\n      }\n    };\n\n    return { product, selectedSize,  addToCart }; // Make selectedSize available in the template\n  }\n};\n</script>\n\n\n<style scoped>\n.product-detail-container {\n  padding: 2rem;\n  max-width: 1200px; /* Ограничиваем максимальную ширину страницы */\n  margin: 0 auto; /* Центрируем контейнер */\n}\n\n.product-detail {\n  display: flex;\n  gap: 2rem;\n  align-items: center; /* Центрирование по вертикали */\n}\n\n.image-slider-wrapper {\n  flex: 1;\n  display: flex;\n  justify-content: center; /* Центрирование слайдера по горизонтали */\n  align-items: center; /* Центрирование слайдера по вертикали */\n}\n\n.product-info {\n  flex: 2;\n  display: flex;\n  flex-direction: column;\n  justify-content: center; /* Центрирование контента внутри блока */\n}\n\n.price {\n  font-size: 1.5rem;\n  color: #333;\n  margin: 1rem 0;\n}\n\n.size-selection {\n  margin: 1rem 0;\n}\n\n.size-options {\n  display: flex;\n  flex-wrap: wrap;\n}\n\n.size-button {\n  margin: 0.5rem;\n  padding: 0.5rem 1rem;\n  border: 1px solid #ccc;\n  background-color: #f9f9f9;\n  cursor: pointer;\n  width: calc(25% - 1rem); /* Каждый размер занимает 25% ширины (максимум 4 на строку) */\n}\n\n.size-button:hover {\n  background-color: #eaeaea;\n}\n\n.buy-button {\n  padding: 1rem;\n  background-color: #ff4742;\n  color: white;\n  border: none;\n  cursor: pointer;\n  font-size: 1.2rem;\n  margin: 1rem 0;\n}\n\n.buy-button:hover {\n  background-color: #e13e3a;\n}\n\n.description {\n  font-size: 1rem;\n  color: #666;\n  margin: 1rem 0;\n}\n.size-selection {\n  margin: 20px 0;\n  display: flex;\n  align-items: center;\n  gap: 20px; /* Расстояние между заголовком и селектом */\n}\n\n.size-selection h2 {\n  font-size: 1.2rem;\n  font-weight: bold;\n  color: #333;\n  white-space: nowrap; /* Чтобы текст заголовка не переносился */\n}\n\n.size-dropdown {\n  padding: 10px 15px;\n  font-size: 1rem;\n  border: 2px solid #ddd;\n  border-radius: 8px;\n  background: #f9f9f9;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  transition: all 0.3s ease;\n  width: 100%;\n  max-width: 200px;\n  cursor: pointer;\n}\n\n.size-dropdown:hover {\n  background: #ffffff;\n  border-color: #a67c52;\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\n}\n\n.size-dropdown:focus {\n  outline: none;\n  border-color: #a67c52;\n  background: #ffffff;\n}\n\n\n\n</style>\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}