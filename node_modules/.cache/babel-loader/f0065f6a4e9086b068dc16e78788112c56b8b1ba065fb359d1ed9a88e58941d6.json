{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport ModalWindow from \"@/components/ModalWindow.vue\";\nimport { useStore } from \"vuex\";\nimport axios from \"axios\"; // Подключение axios\n\nexport default {\n  components: {\n    ModalWindow\n  },\n  data() {\n    return {\n      userRole: localStorage.getItem(\"userRole\")\n    };\n  },\n  methods: {\n    showLogoutModal() {\n      this.$refs.confirmationModal.openModal();\n    },\n    async logout() {\n      try {\n        // Отправляем запрос на бэкенд\n        await axios.post(\"http://localhost:localhost:7265/Auth/logout\"); // Замените URL на ваш\n\n        // Вызываем action Vuex для сброса данных\n        this.$store.dispatch(\"logout\");\n\n        // Удаляем токен из localStorage\n        localStorage.removeItem(\"authToken\");\n\n        // Перенаправляем на страницу входа\n        this.$router.push(\"/\");\n      } catch (error) {\n        console.error(\"Ошибка при выходе из аккаунта:\", error);\n      }\n    }\n  }\n};","map":{"version":3,"mappings":";AA6BA,OAAOA,WAAU,MAAO,8BAA8B;AACtD,SAASC,QAAO,QAAS,MAAM;AAC/B,OAAOC,KAAI,MAAO,OAAO,EAAE;;AAE3B,eAAe;EACbC,UAAU,EAAE;IACVH;EACF,CAAC;EACDI,IAAIA,GAAG;IACL,OAAO;MACLC,QAAQ,EAAEC,YAAY,CAACC,OAAO,CAAC,UAAU;IAC3C,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACPC,eAAeA,GAAG;MAChB,IAAI,CAACC,KAAK,CAACC,iBAAiB,CAACC,SAAS,CAAC,CAAC;IAC1C,CAAC;IACD,MAAMC,MAAMA,GAAG;MACb,IAAI;QACF;QACA,MAAMX,KAAK,CAACY,IAAI,CAAC,6CAA6C,CAAC,EAAE;;QAEjE;QACA,IAAI,CAACC,MAAM,CAACC,QAAQ,CAAC,QAAQ,CAAC;;QAE9B;QACAV,YAAY,CAACW,UAAU,CAAC,WAAW,CAAC;;QAEpC;QACA,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC,GAAG,CAAC;MAExB,EAAE,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;MACxD;IACF;EACF;AACF,CAAC","names":["ModalWindow","useStore","axios","components","data","userRole","localStorage","getItem","methods","showLogoutModal","$refs","confirmationModal","openModal","logout","post","$store","dispatch","removeItem","$router","push","error","console"],"sourceRoot":"","sources":["/Users/nicolassergeev/WebstormProjects/MegaProject/src/components/AppHeader.vue"],"sourcesContent":["<template>\n  <header class=\"header\">\n    <div class=\"flex items-center gap-4\">\n      <router-link to=\"/home\">\n        <img src=\"../assets/img/logo.webp\" alt=\"Logo\" class=\"logo-size cursor-pointer\" />\n      </router-link>\n      <div>\n        <h2 v-if=\"this.userRole === '0'\" class=\"font-bold text-xl uppercase\">Ваша роль: Бригадир</h2>\n        <h2 v-if=\"this.userRole === '1'\" class=\"font-bold text-xl uppercase\">Ваша роль: Заказчик</h2>\n        <h2 v-if=\"this.userRole === '2'\" class=\"font-bold text-xl uppercase\">Ваша роль: Админ</h2>\n        <p class=\"text-slate-400\">Приложение для управления заказами</p>\n      </div>\n    </div>\n\n    <ul class=\"flex items-center gap-10\">\n      <li class=\"flex items-center gap-3 cursor-pointer\" @click=\"showLogoutModal\">\n        <img src=\"/profile.svg\" alt=\"Favorite\" />\n        <span>Мой аккаунт</span>\n      </li>\n    </ul>\n\n    <ModalWindow\n        ref=\"confirmationModal\"\n        @confirm=\"logout\"\n    />\n  </header>\n</template>\n\n<script>\nimport ModalWindow from \"@/components/ModalWindow.vue\";\nimport { useStore } from \"vuex\";\nimport axios from \"axios\"; // Подключение axios\n\nexport default {\n  components: {\n    ModalWindow,\n  },\n  data() {\n    return {\n      userRole: localStorage.getItem(\"userRole\"),\n    };\n  },\n  methods: {\n    showLogoutModal() {\n      this.$refs.confirmationModal.openModal();\n    },\n    async logout() {\n      try {\n        // Отправляем запрос на бэкенд\n        await axios.post(\"http://localhost:localhost:7265/Auth/logout\"); // Замените URL на ваш\n\n        // Вызываем action Vuex для сброса данных\n        this.$store.dispatch(\"logout\");\n\n        // Удаляем токен из localStorage\n        localStorage.removeItem(\"authToken\");\n\n        // Перенаправляем на страницу входа\n        this.$router.push(\"/\");\n\n      } catch (error) {\n        console.error(\"Ошибка при выходе из аккаунта:\", error);\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.logo-size {\n  width: 70px; /* Adjust size as needed */\n  height: auto; /* Maintain aspect ratio */\n}\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}